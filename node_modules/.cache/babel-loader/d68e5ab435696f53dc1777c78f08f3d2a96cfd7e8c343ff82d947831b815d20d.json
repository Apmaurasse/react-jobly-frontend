{"ast":null,"code":"import React,{useState,useContext}from\"react\";import{useNavigate}from\"react-router-dom\";import JoblyContext from\"../JoblyContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=_ref=>{let{loginKey}=_ref;const navigate=useNavigate();const JoblyApi=useContext(JoblyContext);const initialState={username:\"\",password:\"\",error:\"\"};const[loginData,setLoginData]=useState(initialState);const handleChange=e=>{const{name,value}=e.target;setLoginData(prevData=>({...prevData,[name]:value}));};const handleSubmit=async event=>{event.preventDefault();try{// Call findUser function from JoblyApi class to verify credentials\nawait JoblyApi.findUser(loginData);console.log(\"Login successful!\");navigate('/');// Redirect after successful login\nloginKey();// Update the key in the parent component\n}catch(error){// If there's an error, handle it\nconsole.error(\"Error:\",error.message);if(error.message===\"User not found\"){setLoginData(prevData=>({...prevData,error:\"Invalid username/password\"}));}else{setLoginData(prevData=>({...prevData,error:error.message}));}}setLoginData(prevData=>({...prevData,username:\"\",password:\"\"}));};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"section\",{className:\"section-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title-container\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"form-container\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-item\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"username\",type:\"text\",name:\"username\",value:loginData.username,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-item\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",type:\"password\",name:\"password\",value:loginData.password,onChange:handleChange})]}),loginData.error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",style:{color:'red'},children:loginData.error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"})]})]})});};export default Login;","map":{"version":3,"names":["React","useState","useContext","useNavigate","JoblyContext","jsx","_jsx","jsxs","_jsxs","Login","_ref","loginKey","navigate","JoblyApi","initialState","username","password","error","loginData","setLoginData","handleChange","e","name","value","target","prevData","handleSubmit","event","preventDefault","findUser","console","log","message","children","className","onSubmit","htmlFor","id","type","onChange","style","color"],"sources":["/Users/adammaurasse/Springboard/React/React_Jobly/react-jobly/frontend/src/Templates/Login.jsx"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport JoblyContext from \"../JoblyContext\";\n\nconst Login = ({loginKey}) => {\n    const navigate = useNavigate();\n    const JoblyApi = useContext(JoblyContext);\n\n    const initialState = {\n        username: \"\",\n        password: \"\",\n        error: \"\"\n    };\n\n    const [loginData, setLoginData] = useState(initialState);\n\n    const handleChange = (e) => {\n        const { name, value } = e.target;\n        setLoginData((prevData) => ({\n            ...prevData,\n            [name]: value\n        }));\n    };\n\n    const handleSubmit = async (event) => {\n        event.preventDefault();\n        \n        try {\n            // Call findUser function from JoblyApi class to verify credentials\n            await JoblyApi.findUser(loginData);\n            console.log(\"Login successful!\");\n            navigate('/'); // Redirect after successful login\n            loginKey(); // Update the key in the parent component\n        } catch (error) {\n            // If there's an error, handle it\n            console.error(\"Error:\", error.message);\n            if (error.message === \"User not found\") {\n                setLoginData((prevData) => ({\n                    ...prevData,\n                    error: \"Invalid username/password\"\n                }));\n            } else {\n                setLoginData((prevData) => ({\n                    ...prevData,\n                    error: error.message\n                }));\n            }\n        }\n        setLoginData((prevData) => ({\n            ...prevData,\n            username: \"\",\n            password: \"\"\n        }));\n    };\n\n    return (\n        <div>\n\n\n            <section className=\"section-container\">   \n    \n            <h1 className=\"title-container\">Login</h1> \n\n                    <form className=\"form-container\" onSubmit={handleSubmit}>\n                        <div className=\"form-item\">\n                            <label htmlFor=\"username\">Username:</label>\n                            <input \n                                id=\"username\" \n                                type=\"text\" \n                                name=\"username\"\n                                value={loginData.username} \n                                onChange={handleChange} />\n                        </div>\n\n                        <div className=\"form-item\">\n                            <label htmlFor=\"password\">Password:</label>\n                            <input \n                                id=\"password\" \n                                type=\"password\" \n                                name=\"password\"\n                                value={loginData.password} \n                                onChange={handleChange} />\n                        </div>\n                        \n                        {loginData.error && (\n                            <div className=\"error-message\" style={{ color: 'red' }}>{loginData.error}</div>\n                        )}\n\n                        <button type=\"submit\">Submit</button>       \n                    </form>\n               \n            </section>\n        </div>\n    );\n};\n\nexport default Login;\n\n\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}